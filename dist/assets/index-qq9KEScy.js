(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const initSubscriptions=function(e){for(let t of["__propSubscriptions__"])e.hasOwnProperty(t)||(e[t]={});e.__propSubscribe__=(t,r)=>{e.__propSubscriptions__.hasOwnProperty(t)||(e.__propSubscriptions__[t]=[]),e.__propSubscriptions__[t].push(r)},e.__initialSubscriptionCallback=function(){Object.keys(e.__propSubscriptions__).forEach(t=>{e.__propSubscriptions__[t].map(r=>r())})}},connectAttributes=function(e,t){(e.__config__.map.operations||[]).forEach(i=>{i.setup(e,t,i)}),e.__config__.map.text.forEach(i=>{i.setup(e,t,i),i.callback(e,t)}),e.__config__.map.events.forEach(i=>{i.setup(e,t,i),i.callback(e,t)}),console.log(e.__config__.map)},connectController=function(e,t){for(let r of e.__config__.props)t.parentElement.__defineGetter__(r,function(){return t.__scope__[r]}),t.parentElement.__defineSetter__(r,function(n){return t.__scope__[r]=n,!0});for(let r of t.parentElement.__methods__)!t[r]&&typeof t.parentElement[r]=="function"&&(t[r]=t.parentElement[r].bind(t))},operationQuery={queryEnd:"){",leftSearch:"{",rightSearch:"}"},ruleSet={expression:{leftSearch:"{{",rightSearch:"}}"},bind:"*",event:{leftSearch:" ",rule:'="{',rightSearch:'}"',exclude:"{{"},customEvent:{leftSearch:" (",rule:')="{',rightSearch:'}"'},operation:{if:{operation:"if",queryStart:"@if(",...operationQuery},for:{operation:"for",queryStart:"@for(",...operationQuery}},cleanup:"$$__pihh__3,14__$$"},output=function(e=!1,t="",r={}){return{success:e,message:t,data:r}},filterStack=(e,t="{{",r="}}")=>{let n=e.indexOf(t),o=output(!1,"No ocorrences",{}),i=n,c=1;if(n>-1)for(let s=Math.max(n+t.length+1,n+r.length+1);s<e.length;s++){let l=e.substring(s,s-t.length),p=e.substring(s,s-r.length);if(l==t?c++:p==r&&c--,c==0){o.success=!0,i=s-r.length,o.data={start:n,end:i,expression:e.slice(n+1,i),search:e},o.message="Found a successfull match";break}}return o},capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1),lowerCaseFirstLetter=e=>e.charAt(0).toLowerCase()+e.slice(1),replaceAll=function(e,t=[]){for(let r of t){let n=r[0],o=r[1];e=e.replaceAll(n,o)}return e},separateAll=function(e,t=[],r=" "){for(let n of t)e=e.replaceAll(n,r);return e},isChar=function(e){return e.toUpperCase()!=e.toLowerCase()},validateProp=function(e,t){return e=replaceAll(e,[["[","."],["]","."]]),e=separateAll(e,["!","<",">","?",":","+","-","="],"."),e=e.split(".").map(r=>r.trim()).filter(r=>r.length>0).filter(r=>r.indexOf(t)>-1),e.includes(t)},extractPath=function(e,t){let r="__&&__";e=replaceAll(e,[["[",".["],["]","]."]]).replaceAll("..","."),e=separateAll(e,["!","<",">","?",":","+","-","=","*","/","%","'",'"',"`","}","{",")","("],r).split(" ").map(l=>l.trim()).join(".").split(".");let n=e.indexOf(t),o=t;for(let l=n+1;l<e.length;l++){let p=e[l];if(p.indexOf(r)>-1||p==" ")break;o+="."+p}let i="expression";o.indexOf(r)>-1&&(o=o.slice(0,o.indexOf(r)),o[0],o[0],i="eval"),o=o.trim().replaceAll(".[","["),o.charAt(o.length-1)=="."&&(o=o.substr(0,o.length-1));let c=o.lastIndexOf("]"),s=o.lastIndexOf(".");return s>-1&&s<o.length-1&&(isChar(o[s+1])||(o=o.slice(0,s))),c>-1&&c<o.length-1&&!isChar(o[c+1])&&o.charAt(c+1)!=="."&&(o=o.slice(0,c)),{path:o,evaluation:i}},findProps=function(e,t=[]){let r=[];for(let n of t)validateProp(e,n)&&r.indexOf(n)==-1&&r.push(n);return r=r.map(n=>n.trim()).filter(n=>n.length>0).map(n=>extractPath(e,n)),r},pathName=function(e){return Array.isArray(e)||(e=e.replaceAll("[","."),e=e.split(".").map(t=>t.replaceAll("]","").replaceAll(".","").trim())),e=e.join("."),e};function _defineProperty$2(e,t,r){return t=_toPropertyKey$2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return typeof t=="symbol"?t:String(t)}function _toPrimitive$2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class PubSub{constructor(){_defineProperty$2(this,"events",{}),_defineProperty$2(this,"prevValues",{}),_defineProperty$2(this,"trackTimeout",void 0)}subscribe(t,r){return t=pathName(t),this.events[t]||(this.events[t]=[],this.prevValues[t]=void 0),this.events[t].push(r),(()=>{let o=!0;return{event:t,callback:r,render:()=>{if(o&&this.events[t])for(let i of this.events[t])i()},unsubscribe:()=>{o&&(o=!1,this.events[t]&&(this.events[t]=this.events[t].filter(i=>i!==r)))}}})()}publish(t,r){this.events[t]&&this.events[t].forEach(n=>n(r))}unsubscribe(t){console.log("@TODO unsubscribe")}track(){clearTimeout(this.trackTimeout),this.trackTimeout=setTimeout(()=>{console.log("---------------------------"),console.log("Subscription tracking".toUpperCase()),console.log("---------------------------");let t=0;for(let r of Object.keys(this.events)){let n=this.events[r].length;console.log("Sub:",r,n),t+=n}console.log(""),console.log("TOTAL: ",t+" active subscriptions"),console.log("-------------------------------------")},100)}}class ProxyMembrane{constructor(t,r){return this._preproxy=new WeakMap,this._handler=r,this.proxify(t,[])}makeHandler(t){let r=this;return{get(n,o,i){return r._handler.get?r._handler.get(n,[...t,o],i):n[o]},set(n,o,i,c){return typeof i=="object"&&(i=r.proxify(i,[...t,o])),n[o]=i,r._handler.set&&r._handler.set(n,[...t,o],i,c),!0},deleteProperty(n,o){if(Reflect.has(n,o)){r.unproxy(n,o);let i=Reflect.deleteProperty(n,o);return i&&r._handler.deleteProperty&&r._handler.deleteProperty(n,[...t,o]),i}return!1}}}unproxy(t,r){this._preproxy.has(t[r])&&(t[r]=this._preproxy.get(t[r]),this._preproxy.delete(t[r]));for(let n of Object.keys(t[r]))typeof t[r][n]=="object"&&this.unproxy(t[r],n)}proxify(t,r){for(let o of Object.keys(t))typeof t[o]=="object"&&(t[o]=this.proxify(t[o],[...r,o]));let n=new Proxy(t,this.makeHandler(r));return this._preproxy.set(n,t),n}}const Reactive=function(e){const t=new PubSub;return e=new ProxyMembrane(e,{set(o,i,c,s){try{let l=pathName(i),p=typeof o[l];return l.indexOf("__")==0||(p!=="object"||Array.isArray(o[l]))&&t.publish(pathName(i),c),!0}catch(l){console.warn(l),console.log(i,pathName(i),c)}},deleteProperty(o,i){},getPath(o,i){console.log("getPath",i.split("."),o)}}),[e,function(o,i){return t.subscribe(pathName(o),i)},function(){for(let o of Object.keys(t.events))t.publish(o)},t]},State=function(e={}){let[t,r,n]=Reactive(e);return{scope:t,connect:r,render:n}},connectGetterSetterAttributes=function(e,t){const r=e.__config__.props;for(let n of r)t.__defineGetter__(n,function(){return t.__scope__[n]}),t.__defineSetter__(n,function(o){return t.__scope__[n]=o,!0})},connectReactivity=function(e,t){const{scope:r,connect:n,render:o}=State(Object.assign({},e.scope));t.__scope__=r,t.__connection__=n,t.__render__=o,t.parentElement.__scope__=t.__scope__,t.parentElement.__connection__=t.__connection__,t.parentElement.__render__=t.__render__,connectGetterSetterAttributes(e,t),initSubscriptions(t),connectAttributes(e,t),connectController(e,t)},Connect=function(e,t){(!t||!t.__connected__)&&(t.innerHTML||(t.innerHTML=e.__config__.template),connectReactivity(e,t),t.__connected__=!0),t.__render__()};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lib={},getSelectorPath={},trim={exports:{}};(function(e,t){t=e.exports=r;function r(n){return n.replace(/^\s*|\s*$/g,"")}t.left=function(n){return n.replace(/^\s*/,"")},t.right=function(n){return n.replace(/\s*$/,"")}})(trim,trim.exports);var trimExports=trim.exports,utils={},childHelper={};Object.defineProperty(childHelper,"__esModule",{value:!0});childHelper.findChildWithSameTag=(e,t)=>Array.from(e.childNodes).filter(o=>o.tagName&&o.tagName.toLowerCase()===t);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}Object.defineProperty(e,"__esModule",{value:!0}),t(childHelper)})(utils);(function(e){var t=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});const r=t(trimExports),n=utils,o=s=>{const l=s.split(/\s/g),p=[];for(let f=0;f<l.length;++f)l[f].length>0&&p.push(`.${l[f]}`);return p.join("")},i=s=>{let l=0;const p=s.parentNode.childNodes;let f=0;for(;f<p.length;++f){const a=p[f];if(a.nodeType===1&&++l,a===s)return l}},c=(s,l={},p=[])=>{const f=s.tagName.toLowerCase(),a=[f],u=s.getAttribute("class"),d=s.getAttribute("id"),{rootNode:_,useClassName:h,useNodeId:b}=l;return d&&b?(p.unshift(f+"#"+r.default(d)),p):(u&&h&&a.push(o(u)),f!=="html"&&f!=="body"&&s.parentNode&&n.findChildWithSameTag(s.parentNode,f).length>1&&a.push(":nth-child("+i(s)+")"),p.unshift(a.join("")),s.parentNode&&s.parentNode!==_&&s.parentNode.tagName&&c(s.parentNode,l,p),p)};e.getSelectorPath=(s,l={})=>l.minify?c(s,l,[]).join(">"):c(s,l,[]).join(" > "),e.default=e.getSelectorPath})(getSelectorPath);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}Object.defineProperty(e,"__esModule",{value:!0}),t(getSelectorPath)})(lib);const expressionCallback=function(e,t,r="string"){const n=Function("return `"+t+"`");try{r=typeof n.call(e)}catch(o){console.info({instance:e,expression:t,datatype:r}),console.log(t,e),console.warn(o)}return n.call(e)},actionCallback=function(instance,expression,args){const fn=eval("()=>{let args = [...arguments]; console.log(args); let self = args[0].parentElement; let action=args[1]; self[action](...[args.slice(2)])}");return function(){fn.bind(instance)()}},evaluationCallback=function(e,t,r="string"){const n=Function("return `"+t+"`");try{r=typeof n.call(e)}catch(o){console.info({instance:e,expression:t,datatype:r}),console.warn(o)}return function(){return n.call(e,...arguments)}},setterCallback=function(instance,expression){const fn=eval("(instance,value)=> instance."+expression+" = value");try{let e=typeof Function("return `${this."+expression+"}`").call(instance)}catch(e){console.info({instance,expression}),console.warn(e)}return fn},getterCallback=function(instance,expression){const fn=eval("(instance) => instance."+expression);return fn},setupInputConnection=function(e,t,r,n={}){t.hasOwnProperty(n.__symbol__)||(t[n.__symbol__]=!0,e=e.parentElement||e,r=r.trim(),n.eventListenerCallback(e,t,r),n.valueListenerCallback(e,t,r))},validateEventListenerCallback=function(e,t,r,n){let o=t(e);r!=o&&r!=null&&n(r)},inputConnectionConfig={event:"input",value:"",__symbol__:Symbol("TheInputConnection"),eventListenerCallback:function(e,t,r){const n=t.getAttribute("type")||"text";let o=setterCallback(e,r),i=getterCallback(e,r);n=="text"?t.addEventListener("input",function(c){validateEventListenerCallback(e,i,c.target.value,function(s){o(e,s)})}):n=="number"?t.addEventListener("input",function(c){validateEventListenerCallback(e,i,c.target.value,function(s){o(e,s)})}):n=="checkbox"&&t.addEventListener("change",function(c){typeof c=="object"&&validateEventListenerCallback(e,i,c.target.checked,function(s){o(e,["true",!0].indexOf(s)>-1)})})},valueListenerCallback:function(e,t,r){let n=getterCallback(e,r);const o=function(i){i=i||n(e),t.getAttribute("value")!==i&&i!==void 0&&t.setAttribute("value",i)};e.__connection__(r,o),o(n(e))},setup:function(e,t,r){setupInputConnection(e,t,r,this)}},selectConnectionConfig={event:"change",__symbol__:Symbol("TheSelectConnection"),eventListenerCallback:function(e,t,r){let n=setterCallback(e,r),o=getterCallback(e,r);t.addEventListener("change",function(i){validateEventListenerCallback(e,o,i.target.value,function(c){n(e,c)})})},valueListenerCallback:function(e,t,r){let n=getterCallback(e,r);const o=function(i){i=i||n(e),t.getAttribute("value")!==i&&i!==void 0&&[...t.querySelectorAll("option")].map(s=>{s.getAttribute("value")==i?s.setAttribute("selected",!0):s.removeAttribute("selected")})};e.__connection__(r,o),o(n(e))},setup:function(e,t,r){setupInputConnection(e,t,r,this)}},inputEventSetup=function(e,t,r,n={}){inputConnectionConfig.setup(e,t,r)},checkBoxEventSetup=function(e,t,r,n={}){({...inputConnectionConfig,valueListenerCallback:function(i,c,s){let l=getterCallback(i,s);const p=function(f){(typeof f>"u"||f=="undefined")&&(f=l(i)),!(typeof f>"u")&&(["true",!0].indexOf(f)>-1?c.checked=!0:c.checked=!1)};i.__connection__(s,p),p(l(i))}}).setup(e,t,r)},selectEventSetup=function(e,t,r,n={}){selectConnectionConfig.setup(e,t,r)};function randomString(e=4){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=r.length;let o=0;for(;o<e;)t+=r.charAt(Math.floor(Math.random()*n)),o+=1;return t.toLowerCase()}const generateRandomDatasetAttribute=function(){let e=randomString(7),t=randomString(7),r=e+"-"+t,n="data-"+r+'="true"';return{directive:" "+n+" ".replaceAll("'",""),uuid:r,selector:`[${n}]`,path:lowerCaseFirstLetter(e)+capitalizeFirstLetter(t)}};function getClone(e,t){return e.querySelector(t.dataset.selector)}function setupCleanup(e,t,r){delete t.dataset[r.dataset.path]}const attributeOutput=function(e,t,r,n,o){let i=r.split("{{").filter(a=>a.indexOf("}}")>-1).map(a=>a.trim()).map(a=>a.split("}}")[0]),c=r,s=[];for(let a of i){s=s.concat(findProps(a,n));for(let u of s)c=c.replaceAll(u.path,"this."+u.path).replaceAll("this.this.","this.")}c=c.replaceAll("{{","${").replaceAll("}}","}");let l={type:e,attributeName:t,value:r,props:n,dataset:o,paths:s,expression:c},p=function(){},f=function(a,u,d){let _=function(){},h=getClone(u,l);if(l.type=="text"){let b=h;h=h.childNodes[l.attributeName];for(let g of s){const m=Function("return `"+l.expression+"`");let y=function(){h.textContent=m.call(u)};u.__connection__(g.path,y),y()}delete b.dataset[l.dataset.path]}else if(l.type=="reference"){let b=getClone(u,l);b.__reference__=u.parentElement||u,b.removeAttribute("*ref"),setupCleanup(u,b,l)}else if(l.type=="model"){if(h.nodeName=="INPUT"){let b=getClone(u,l);b.getAttribute("type")=="checkbox"?checkBoxEventSetup(u,b,c):inputEventSetup(u,b,l.value)}else if(h.nodeName==="SELECT"){let b=getClone(u,l);selectEventSetup(u,b,c)}setupCleanup(u,h,l),h.removeAttribute("*bind")}else{for(let b of s){if(b.evaluation=="eval"){console.log(b,c);let g=evaluationCallback(u,l.expression);b.path=b.path.replace("counterUpdating.","").replaceAll("this.",""),_=function(){let m=g();h.setAttribute(l.attributeName,m)}}else _=function(){h.setAttribute(l.attributeName,expressionCallback(u,l.expression))};u.__connection__(b.path.replace("couterUpdating.",""),_),_()}delete h.dataset[l.dataset.path]}};return l.setup=f,l.callback=p,l},inspectAttributes=function(e,t={}){const r=ruleSet.expression.leftSearch,n=ruleSet.expression.rightSearch,o=Object.keys(t);let i=output();i.data={template:e,expressions:[]};const c=function(s){return[...new Set(s.split(r).map(l=>l.trim()).filter(l=>l.indexOf(n)>0).map(l=>l.split(n)[0]))]};for(let s of[...e.querySelectorAll("*")]){for(let p of s.getAttributeNames()){let f=s.getAttribute(p),a=c(f);if(a.length>0){if(a.length>1){console.log(s,p,f,a);debugger}i.success=!0;let u=generateRandomDatasetAttribute();s.dataset[u.path]=!0,i.data.expressions.push(attributeOutput("attribute",p,f,o,u))}if(p.indexOf("*")>-1){i.success=!0;let u=generateRandomDatasetAttribute();s.dataset[u.path]=!0,p==="*ref"?i.data.expressions.push(attributeOutput("reference",p,f,o,u)):i.data.expressions.push(attributeOutput("model",p,f,o,u))}}let l=0;for(let p of s.childNodes){if(p.nodeType==3){let f=p.textContent;if(c(f).length>0){i.success=!0;let u=generateRandomDatasetAttribute();s.dataset[u.path]=!0,i.data.expressions.push(attributeOutput("text",l,f,o,u))}}l++}}return i},compileRules={whileLoop:{maxLoops:100,monitor(e=100){let t=0;return e=100,e=Math.abs(e+1),()=>{if(t++,t>e)throw console.log(t),new Error("Too many loops")}}}},eventOutput=function(e,t,r,n,o,i){let c={eventName:e,eventType:t,eventArguments:r,originalExpression:n,parsedExpression:o,dataset:i};return c.setup=function(s,l,p){let f=l.querySelector(c.dataset.selector),a=actionCallback(l);"touchstart"in window?f.addEventListener("touchstart",a):f.addEventListener("click",a),delete l.dataset[c.dataset.path]},c.callback=function(){},c},inspectEvents=function(e,t={}){const r=ruleSet.event.rule,n=ruleSet.event.leftSearch,o=ruleSet.event.rightSearch;let i=output(),c,s;i.data={template:e,expressions:[]};const l=function(a){let u=a.split(r),d=[];if(u.length>1)for(let _=1;_<u.length;_++){let h=u[_-1],b=u[_];if(b.charAt(0)!="{"){d.push(h),d.push(b);break}}return d};let p=compileRules.whileLoop.monitor(3),f=l(e);for(;f.length>0;){p();let a=f[0],u=f[1].trim(),d,_=generateRandomDatasetAttribute(),h;c=a.split(n),c=c[c.length-1],s=filterStack("{"+u,"{",o),d=n+c+r+s.data.expression+o,e=e.replace(d,_.directive),h=eventOutput(c,"native",[],d,s.data.expression,_),i.success=!0,i.message="found ocurrences",i.data.template=e,i.data.expressions.push(h),f=l(e)}return i},inspectCustomEvents=function(e,t={}){const r=ruleSet.customEvent.rule,n=ruleSet.customEvent.leftSearch,o=ruleSet.customEvent.rightSearch;let i,c,s=output(),l=e.split(r),p=compileRules.whileLoop.monitor(3);for(s.data={template:e,expressions:[]};l.length>1;){p();let f=l[0],a=l[1].trim(),u,d=generateRandomDatasetAttribute(),_;i=f.split(n),i=i[i.length-1],c=filterStack("{"+a,"{",o),u=n+i+r+c.data.expression+o,e=e.replace(u,d.directive),_=eventOutput(i,"custom",[],u,c.data.expression,d),s.success=!0,s.message="found ocurrences",s.data.template=e,s.data.expressions.push(_),l=e.split(r)}return s},setupIfOperation=function(e,t={},r){return{...ruleSet.operation.if,monitor:compileRules.whileLoop.monitor(100),getOcorrences(){},success(){},cleanup(){}}},setupForOperation=function(e,t={},r){return{...ruleSet.operation.for,monitor:compileRules.whileLoop.monitor(100),getOcorrences(){},success(){},cleanup(){}}},operationOutput=function(e,t,r,n,o){const i={operation:e,operationArguments:t,originalExpression:r,parsedExpression:n,dataset:o};let c=function(){},s=function(l,p,f){getClone(p,i);let a=p.parentElement||p;if(i.operation==="if"){const u=n,d=a.querySelector(o.selector),_=document.createComment("if operation placeholder");_.__connected__=!0,_.controller=a;const h=[...d.childNodes].map(m=>(m.__comment__=_,m.controller=a,m));d.before(_),d.before(_),h.forEach(m=>_.after(m));let b=getterCallback(a,u);const g=function(m){(typeof m>"u"||m=="undefined")&&(m=b(a)),!(typeof m>"u")&&(console.log({ifOperation:m}),["true",!0].indexOf(m)>-1?h.forEach(y=>{_.after(y)}):h.forEach(y=>{y.remove()}))};a.__connection__(u,g)}};return i.setup=s,i.callback=c,i},extractOcorrence=function(e,t){t.monitor();let r=e.split(t.queryStart),n=output();if(n.data={operation:t,query:"",template:""},r.length>1){let o=r[0],i=r.slice(1);i=i.join(t.queryStart);let c=i.split("){")[0].replace("(","").trim();i=i.split("){"),i=i.slice(1),i=i.join("){"),i.charAt(0)!="{"&&(i="{"+i);let s=filterStack(i,"{","}");console.log(s),n=output(!0,"Found ocorrences",{left:o,right:i.slice(1+s.data.end),query:c,search:r,replacement:s.data.expression,ocorrences:s,operation:t})}return n},getOcorrences=function(e,t,r){let n=e.indexOf(t.queryStart),o=e.indexOf(r.queryStart),i=output();return n==-1&&o==-1||(n==-1?i=extractOcorrence(e,r):o==-1||n>o?i=extractOcorrence(e,t):o>n&&(i=extractOcorrence(e,r))),i},inspectOperations=function(e,t={}){let r=output(),n=setupIfOperation(e,t),o=setupForOperation(e,t),i=getOcorrences(e,n,o);for(r.data={template:e,expressions:[]};i.success;){let c=i.data.left,s=generateRandomDatasetAttribute();e=c+"<option "+s.directive+">"+i.data.replacement+"</option>"+i.data.right,r.success=!0,r.data.template=e,r.data.expressions.push(operationOutput(i.data.operation.operation,i,i.data.replacement,i.data.query,s)),i=getOcorrences(e,n,o)}return r},mapDom=function(e,t={}){const r={customEvents:[],events:[],text:[]},n={map:r,template:e,props:Object.keys(t),scope:t};[e].concat([...e.querySelectorAll("*")]);const o=document.createElement("div");o.appendChild(e);let i=o.innerHTML,c=inspectCustomEvents(i,t);c.success&&(r.customEvents=c.data.expressions,i=c.data.template);let s=inspectEvents(i,t);s.success&&(r.events=s.data.expressions,i=s.data.template);let l=inspectOperations(i,t);l.success&&(r.operations=l.data.expressions,i=l.data.template),o.innerHTML=i;let p=inspectAttributes(o,t);return p.success&&(r.text=p.data.expressions),e=o.firstElementChild,n.map=r,n.template=e.innerHTML,n};function _defineProperty$1(e,t,r){return t=_toPropertyKey$1(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return typeof t=="symbol"?t:String(t)}function _toPrimitive$1(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TemplateRegistry{constructor(){_defineProperty$1(this,"store",{})}register(t){const r=t.node.cloneNode(!1);let n=t.__name__;return this.store.hasOwnProperty(n)||(r.innerHTML=t.html,this.store[n]=mapDom(r,t.scope),t.__config__=this.store[n]),r.innerHTML=t.__config__.template,r}load(t){return this.store[t]}}const TemplateRegistry$1=new TemplateRegistry,Template=function(e,t={},r){r=r||document.querySelector(e),this.__name__=e,this.node=r,this.html=r.innerHTML,this.scope=t.values,this.scopeMap=t,this.compile()};Template.prototype.compile=function(){TemplateRegistry$1.register(this)};Template.prototype.boot=function(e){Connect(this,e)};Template.prototype.clone=function e(t={},r=null){return t={...this.scope||{},...t},new TemplateClone(this,t,r)};const TemplateClone=function(e,t={},r=!1){return this.template=e,this.scope=t,this.node=e.node.cloneNode(!1),e.compile(),this.append(r)};TemplateClone.prototype.update=function e(t={}){t={...this.scope,...t},this.scope=t,this.node.innerHTML=this.template.html.replace(/\{\s*(\w+)\s*\}/g,function(r,n){var o=t[n];return o===void 0?"{"+n+"}":o})};TemplateClone.prototype.append=function e(t){return t=t||this.template.parent,t.appendChild(this.node),this.template.boot(this.node),this.node};function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const $head=document.head,BaseController=function(e,t){return new Promise(async(r,n)=>{let i=await(await fetch(e.template.url)).text(),c=document.createElement("template"),s=document.createElement("div");c.content.appendChild(s),s.innerHTML=i,$head.appendChild(c);const l=new Template(e.selector,t,c.content.firstElementChild.firstElementChild.cloneNode(!0));c.remove(),r(l)})};function Component(e={}){return function(t){let r;const n=Object.getOwnPropertyNames(t.prototype).filter(i=>["constructor","length","prototype","observedAttributes","observedAttributeTypes","observedAttrbuteValues"].indexOf(i)==-1);if(!r){console.log("Loading ",e.selector);const i={values:t.prototype.observedAttributeValues,types:t.prototype.observedAttributeTypes};r=BaseController(e,i)}class o extends t{constructor(){super(),_defineProperty(this,"__instanciated__",!1),_defineProperty(this,"__methods__",n),this.slotContent=this.innerHTML,this.innerHTML="",this.baseController=r,this.baseController.then(c=>{this.__init__(c)})}__init__(c){if(this.isConnected&&!this.__instanciated__){const s={},p=this.getAttributeNames().filter(a=>a.indexOf("*")==0).filter(a=>a!=="*ref").map(a=>({key:a,value:this.getAttribute(a)}));p.forEach(a=>this.removeAttribute(a));for(let a of this.getAttributeNames())s[a]=this.getAttribute(a);this.template=c.clone(s,this),this.__instanciated__=!0;for(let a of Object.keys(s))this[a]=s[a];for(let a of Object.keys(p)){const u=p[a].value,d=p[a].key.replace("*",""),_=()=>{this.__reference__[u]!=this[d]&&(this[d]=this.__reference__[u])};this.removeAttribute("*"+d);const h=()=>{this.__reference__[u]!=this[d]&&(this.__reference__[u]=this[d])};this.__connection__(d,h),this.__reference__.__connection__(u,_),_(),h()}this.style.visibility="initial",delete this.style.visibility;const f=[...this.querySelectorAll("slot")];if(this.slotContent&&f){const a={};f.forEach(d=>{let _=d.getAttribute("name")||"main";a[_]=d}),a.main.innerHTML=this.slotContent,[...a.main.querySelectorAll("[slot]")].forEach(d=>{let _=d.getAttribute("slot");d.remove(),a[_].appendChild(d)})}}}connectedCallback(){this.baseController.then(c=>{this.__init__(c)})}}return customElements.get(e.selector)||customElements.define(e.selector,o),o}}const validateObservedAttributes=function(e){return e.constructor.observedAttributes||(e.constructor.prototype.observedAttributes=[],e.constructor.observedAttributes=e.constructor.observedAttributes||[]),e.constructor.observedAttributeTypes||(e.constructor.prototype.observedAttributeTypes={},e.constructor.observedAttributeTypes=e.constructor.observedAttributeTypes||{}),e.constructor.observedAttributeValues||(e.constructor.prototype.observedAttributeValues={},e.constructor.observedAttributeValues=e.constructor.observedAttributeValues||{}),e},Prop=function(e){return function(t,r,n){if(t=validateObservedAttributes(t),t.constructor.prototype.observedAttributes.indexOf(r)==-1&&t.constructor.prototype.observedAttributes.push(r),n[r]=e,!t.constructor.prototype.observedAttributeTypes.hasOwnProperty(r)){let o=n.initializer();o!==void 0&&(t.constructor.prototype.observedAttributeTypes[r]=typeof o,t.constructor.prototype.observedAttributeValues[r]=o)}}};var _dec$2,_dec2$2,_dec3$2,_dec4$1,_dec5$1,_dec6$1,_dec7$1,_dec8$1,_dec9$1,_dec10$1,_dec11$1,_dec12$1,_dec13$1,_dec14,_dec15,_class$2,_class2$2,_descriptor$2,_descriptor2$2,_descriptor3$1,_descriptor4$1,_descriptor5$1,_descriptor6$1,_descriptor7$1,_descriptor8$1,_descriptor9$1,_descriptor10$1,_descriptor11$1,_descriptor12$1,_descriptor13,_descriptor14;function _initializerDefineProperty$2(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _applyDecoratedDescriptor$2(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(c){i[c]=n[c]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(c,s){return s(e,t,c)||c},i),o&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}_dec$2=Component({selector:"the-demo",template:{url:"/the-browser/template.html"}}),_dec2$2=Prop(),_dec3$2=Prop(),_dec4$1=Prop(),_dec5$1=Prop(),_dec6$1=Prop(),_dec7$1=Prop(),_dec8$1=Prop(),_dec9$1=Prop(),_dec10$1=Prop(),_dec11$1=Prop(),_dec12$1=Prop(),_dec13$1=Prop(),_dec14=Prop(),_dec15=Prop(),_dec$2(_class$2=(_class2$2=class extends HTMLElement{constructor(){super(),_initializerDefineProperty$2(this,"name",_descriptor$2,this),_initializerDefineProperty$2(this,"description",_descriptor2$2,this),_initializerDefineProperty$2(this,"textBinding",_descriptor3$1,this),_initializerDefineProperty$2(this,"isShowing",_descriptor4$1,this),_initializerDefineProperty$2(this,"isShowingNextLevel",_descriptor5$1,this),_initializerDefineProperty$2(this,"isShowingThirdLevel",_descriptor6$1,this),_initializerDefineProperty$2(this,"isChecked",_descriptor7$1,this),_initializerDefineProperty$2(this,"counter",_descriptor8$1,this),_initializerDefineProperty$2(this,"item",_descriptor9$1,this),_initializerDefineProperty$2(this,"color",_descriptor10$1,this),_initializerDefineProperty$2(this,"url",_descriptor11$1,this),_initializerDefineProperty$2(this,"counterUpdating",_descriptor12$1,this),_initializerDefineProperty$2(this,"colors",_descriptor13,this),_initializerDefineProperty$2(this,"onCounterUpdateTimeout",_descriptor14,this)}onCounterUpdate(){this.counterUpdating||(this.counterUpdating=!0),clearTimeout(this.onCounterUpdateTimeout),this.onCounterUpdateTimeout=setTimeout(()=>{this.counterUpdating=!1},1e3)}incrementCounter(){this.counter++,this.onCounterUpdate()}onClick(){console.log("on Click"),this.counter--}decrementCounter(){this.counter--,this.onCounterUpdate()}toggleShowing(){this.isShowing=!this.isShowing}toggleShowingNextLevel(){this.isShowingNextLevel=!this.isShowingNextLevel}toggleShowingThirdLevel(){this.isShowingThirdLevel=!this.isShowingThirdLevel}},_descriptor$2=_applyDecoratedDescriptor$2(_class2$2.prototype,"name",[_dec2$2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pihh"}}),_descriptor2$2=_applyDecoratedDescriptor$2(_class2$2.prototype,"description",[_dec3$2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"This is a default value for the description"}}),_descriptor3$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"textBinding",[_dec4$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"text binding"}}),_descriptor4$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"isShowing",[_dec5$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor5$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"isShowingNextLevel",[_dec6$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor6$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"isShowingThirdLevel",[_dec7$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor7$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"isChecked",[_dec8$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor8$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"counter",[_dec9$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor9$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"item",[_dec10$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"xxx"}}),_descriptor10$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"color",[_dec11$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"yellow"}}),_descriptor11$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"url",[_dec12$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://pihh.com"}}),_descriptor12$1=_applyDecoratedDescriptor$2(_class2$2.prototype,"counterUpdating",[_dec13$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor13=_applyDecoratedDescriptor$2(_class2$2.prototype,"colors",[_dec14],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["white","red","blue"]}}),_descriptor14=_applyDecoratedDescriptor$2(_class2$2.prototype,"onCounterUpdateTimeout",[_dec15],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_class2$2));var _dec$1,_dec2$1,_dec3$1,_class$1,_class2$1,_descriptor$1,_descriptor2$1;function _initializerDefineProperty$1(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _applyDecoratedDescriptor$1(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(c){i[c]=n[c]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(c,s){return s(e,t,c)||c},i),o&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}_dec$1=Component({selector:"the-input",template:{url:"/the-input/template.html"}}),_dec2$1=Prop(),_dec3$1=Prop(),_dec$1(_class$1=(_class2$1=class extends HTMLElement{constructor(){super(),_initializerDefineProperty$1(this,"label",_descriptor$1,this),_initializerDefineProperty$1(this,"value",_descriptor2$1,this)}},_descriptor$1=_applyDecoratedDescriptor$1(_class2$1.prototype,"label",[_dec2$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Input component"}}),_descriptor2$1=_applyDecoratedDescriptor$1(_class2$1.prototype,"value",[_dec3$1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pihh"}}),_class2$1));var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_dec10,_dec11,_dec12,_dec13,_class,_class2,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_descriptor10,_descriptor11,_descriptor12;function _initializerDefineProperty(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(c){i[c]=n[c]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(c,s){return s(e,t,c)||c},i),o&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}_dec=Component({selector:"the-browser",template:{url:"/the-browser/template.html"}}),_dec2=Prop(),_dec3=Prop(),_dec4=Prop(),_dec5=Prop(),_dec6=Prop(),_dec7=Prop(),_dec8=Prop(),_dec9=Prop(),_dec10=Prop(),_dec11=Prop(),_dec12=Prop(),_dec13=Prop(),_dec(_class=(_class2=class extends HTMLElement{constructor(){super(),_initializerDefineProperty(this,"name",_descriptor,this),_initializerDefineProperty(this,"description",_descriptor2,this),_initializerDefineProperty(this,"textBinding",_descriptor3,this),_initializerDefineProperty(this,"booleanBinding",_descriptor4,this),_initializerDefineProperty(this,"isChecked",_descriptor5,this),_initializerDefineProperty(this,"counter",_descriptor6,this),_initializerDefineProperty(this,"item",_descriptor7,this),_initializerDefineProperty(this,"color",_descriptor8,this),_initializerDefineProperty(this,"url",_descriptor9,this),_initializerDefineProperty(this,"counterUpdating",_descriptor10,this),_initializerDefineProperty(this,"colors",_descriptor11,this),_initializerDefineProperty(this,"onCounterUpdateTimeout",_descriptor12,this)}onCounterUpdate(){this.counterUpdating||(this.counterUpdating=!0),clearTimeout(this.onCounterUpdateTimeout),this.onCounterUpdateTimeout=setTimeout(()=>{this.counterUpdating=!1},1e3)}incrementCounter(){this.counter++,this.onCounterUpdate()}onClick(){console.log("on Click"),this.counter--}decrementCounter(){this.counter--,this.onCounterUpdate()}},_descriptor=_applyDecoratedDescriptor(_class2.prototype,"name",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pihh"}}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"description",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"This is a default value for the description"}}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"textBinding",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"text binding"}}),_descriptor4=_applyDecoratedDescriptor(_class2.prototype,"booleanBinding",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor5=_applyDecoratedDescriptor(_class2.prototype,"isChecked",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor6=_applyDecoratedDescriptor(_class2.prototype,"counter",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor7=_applyDecoratedDescriptor(_class2.prototype,"item",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"xxx"}}),_descriptor8=_applyDecoratedDescriptor(_class2.prototype,"color",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"yellow"}}),_descriptor9=_applyDecoratedDescriptor(_class2.prototype,"url",[_dec10],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://pihh.com"}}),_descriptor10=_applyDecoratedDescriptor(_class2.prototype,"counterUpdating",[_dec11],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor11=_applyDecoratedDescriptor(_class2.prototype,"colors",[_dec12],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["white","red","blue"]}}),_descriptor12=_applyDecoratedDescriptor(_class2.prototype,"onCounterUpdateTimeout",[_dec13],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_class2));
